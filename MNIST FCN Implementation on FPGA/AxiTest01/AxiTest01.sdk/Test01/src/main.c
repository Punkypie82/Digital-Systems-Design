#define AXI_ADDR0 0x0400000000
volatile unsigned int *AXIAddr0 = (volatile unsigned int *) AXI_ADDR0;

#define START      (AXI_ADDR0 + 25)
#define DONE       (AXI_ADDR0 + 27)
#define PREDICTION (AXI_ADDR0 + 26)

int main()
{
    unsigned int *mem = AXI_ADDR0;
    unsigned int out;

    for(;;)
    {
        xil_printf("--------------------------------\n\r");

        mem[AXI_ADDR0] = 0b00000000000000000000000000000000;
		mem[AXI_ADDR0+1] = 0b00000000000000000000000000000000;
		mem[AXI_ADDR0+2] = 0b00000000000000000000000000000000;
		mem[AXI_ADDR0+3] = 0b00000000000000000000000000000000;
		mem[AXI_ADDR0+4] = 0b00000000000000000000000000000000;
		mem[AXI_ADDR0+5] = 0b00000000000000000000000000000000;
		mem[AXI_ADDR0+6] = 0b00000000000000000000000000000000;
		mem[AXI_ADDR0+7] = 0b00000000000000000000000000000001;
		mem[AXI_ADDR0+8] = 0b10000000000000000000001000011000;
		mem[AXI_ADDR0+9] = 0b00000000000000000110000110000000;
		mem[AXI_ADDR0+10] = 0b00000000000001000001100000000000;
		mem[AXI_ADDR0+11] = 0b00000000010000001000000000000000;
		mem[AXI_ADDR0+12] = 0b00001000111111000000000000000000;
		mem[AXI_ADDR0+13] = 0b11111111110000000000000000000000;
		mem[AXI_ADDR0+14] = 0b00001000000000000000000000000001;
		mem[AXI_ADDR0+15] = 0b10000000000000000000000000011000;
		mem[AXI_ADDR0+16] = 0b00000000000000000000000110000000;
		mem[AXI_ADDR0+17] = 0b00000000000000000001100000000000;
		mem[AXI_ADDR0+18] = 0b00000000000000011000000000000000;
		mem[AXI_ADDR0+19] = 0b00000000000100000000000000000000;
		mem[AXI_ADDR0+20] = 0b00000001100000000000000000000000;
		mem[AXI_ADDR0+21] = 0b00000000000000000000000000000000;
		mem[AXI_ADDR0+22] = 0b00000000000000000000000000000000;
		mem[AXI_ADDR0+23] = 0b00000000000000000000000000000000;
		mem[AXI_ADDR0+24] = 0b00000000000000000000000000000000;
		xil_printf("Setting Input 4\n\r\n\r");

        mem[START] = 1;      	// start = 1
        xil_printf("Assert Start\n\r");
        mem[START] = 0;      	// start = 0
        xil_printf("Deassert Start\n\r\n\r");

        while(mem[DONE] == 0); 	// check done

        out = mem[PREDICTION];
        xil_printf("Prediction: %d\n\r", out);

        sleep(5);
    }
}

